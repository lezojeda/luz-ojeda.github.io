{% assign postsByYear =
    site.posts | group_by_exp:"post", "post.date | date: '%Y'" %}
{% for year in postsByYear %}
<h2>{{ year.name }}</h2>
<ul class="posts-list posts-list-padding">
    {%- assign date_format = "%b %-d" -%}
    {% for post in year.items %}
        <li class="post">
            <h3 class="post-title">
                <a href="{{ site.baseurl }}{{ post.url }}">
                    {{ post.title | escape }}
                </a>
            </h3>
            <span class="date">{{ post.date | date: date_format }}</span>
        </li>
    {% endfor %}
</ul>
{% endfor %}
